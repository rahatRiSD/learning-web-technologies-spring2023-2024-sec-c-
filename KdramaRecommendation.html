<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K-Drama Rom-Com Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">
    <header class="bg-pink-500 text-white text-center py-6">
        <h1 class="text-4xl font-bold">K-Drama Rom-Com Hub</h1>
        <p class="mt-2 text-lg">Your go-to place for the best romantic comedy K-dramas!</p>
    </header>

    <main class="max-w-6xl mx-auto p-6">
        <!-- Filter Section -->
        <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">Find Your Perfect Rom-Com</h2>
            <div class="flex gap-4">
                <select id="sortBy" class="p-2 border rounded">
                    <option value="popularity">Sort by Popularity</option>
                    <option value="year">Sort by Year (Newest First)</option>
                </select>
                <button id="resetWatchlist" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">Clear Watchlist</button>
            </div>
        </section>

        <!-- Drama List -->
        <section id="dramaList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Drama cards will be dynamically inserted here -->
        </section>

        <!-- Watchlist Section -->
        <section class="mt-12">
            <h2 class="text-2xl font-semibold mb-4">Your Watchlist</h2>
            <ul id="watchlist" class="list-disc pl-6"></ul>
        </section>
    </main>

    <footer class="bg-pink-500 text-white text-center py-4">
        <p>&copy; 2025 K-Drama Rom-Com Hub. All rights reserved.</p>
    </footer>

    <script>
        const dramas = [
            { title: "Crash Landing on You", year: 2019, description: "A South Korean heiress crash-lands in North Korea, sparking a forbidden romance with a military officer.", popularity: 1 },
            { title: "Business Proposal", year: 2022, description: "A food researcher poses as her friend on a blind date, only to face her company’s CEO.", popularity: 2 },
            { title: "What’s Wrong with Secretary Kim", year: 2018, description: "A narcissistic CEO tries to keep his secretary from quitting, leading to a romantic office comedy.", popularity: 3 },
            { title: "Strong Woman Do Bong-soon", year: 2017, description: "A super-strong woman becomes a CEO’s bodyguard, blending action, humor, and romance.", popularity: 4 },
            { title: "Full House", year: 2004, description: "A classic contract marriage tale between a writer and an actor.", popularity: 5 },
            { title: "Coffee Prince", year: 2007, description: "A tomboy is mistaken for a boy and hired at a café, leading to a gender-bender romance.", popularity: 6 },
            { title: "My Love from the Star", year: 2013, description: "An alien falls for a famous actress as his time on Earth nears its end.", popularity: 7 },
            { title: "Hometown Cha-Cha-Cha", year: 2021, description: "A city dentist moves to a seaside village, clashing then falling for a local handyman.", popularity: 8 },
            { title: "Because This Is My First Life", year: 2017, description: "A marriage of convenience between a single man and a homeless woman turns real.", popularity: 9 },
            { title: "She Was Pretty", year: 2015, description: "A woman hides her identity from her childhood crush, leading to a quirky, makeover-driven rom-com.", popularity: 10 },
            { title: "Weightlifting Fairy Kim Bok-joo", year: 2016, description: "A weightlifter and a swimmer navigate young love in a coming-of-age tale.", popularity: 11 },
            { title: "Reply 1988", year: 2015, description: "A nostalgic slice-of-life drama with a love triangle set in 1980s Seoul.", popularity: 12 },
            { title: "Our Beloved Summer", year: 2021, description: "Ex-lovers reunite for a documentary, rekindling old feelings.", popularity: 13 },
            { title: "True Beauty", year: 2020, description: "A girl masters makeup to hide her insecurities, sparking a high school love triangle.", popularity: 14 },
            { title: "Fight for My Way", year: 2017, description: "Two childhood friends chase dreams and romance in a relatable, funny story.", popularity: 15 },
            { title: "My Roommate Is a Gumiho", year: 2021, description: "A college student accidentally frees a gumiho, leading to a cohabitation romance.", popularity: 16 },
            { title: "Crash Course in Romance", year: 2023, description: "A banchan shop owner and a star math tutor find love amidst family pressures.", popularity: 17 },
            { title: "Her Private Life", year: 2019, description: "A curator hides her fangirl life, falling for her new boss.", popularity: 18 },
            { title: "Love Next Door", year: 2024, description: "Childhood friends reconnect as adults, navigating past rivalries and new feelings.", popularity: 19 },
            { title: "Oh My Venus", year: 2015, description: "A lawyer and a fitness trainer team up for a transformation, sparking romance.", popularity: 20 }
        ];

        // Load watchlist from local storage
        let watchlist = JSON.parse(localStorage.getItem('watchlist')) || [];

        // Render drama list
        function renderDramas(dramas) {
            const dramaList = document.getElementById('dramaList');
            dramaList.innerHTML = '';
            dramas.forEach(drama => {
                const card = document.createElement('div');
                card.className = 'bg-white p-6 rounded-lg shadow-md';
                card.innerHTML = `
                    <h3 class="text-xl font-bold">${drama.title} (${drama.year})</h3>
                    <p class="mt-2 text-gray-600">${drama.description}</p>
                    <button class="mt-4 bg-pink-500 text-white px-4 py-2 rounded hover:bg-pink-600 add-to-watchlist" data-title="${drama.title}">
                        ${watchlist.includes(drama.title) ? 'Remove from Watchlist' : 'Add to Watchlist'}
                    </button>
                `;
                dramaList.appendChild(card);
            });
        }

        // Render watchlist
        function renderWatchlist() {
            const watchlistEl = document.getElementById('watchlist');
            watchlistEl.innerHTML = watchlist.length ? watchlist.map(title => `<li>${title}</li>`).join('') : '<p>No dramas in your watchlist yet.</p>';
        }

        // Sort dramas
        function sortDramas(criteria) {
            let sortedDramas = [...dramas];
            if (criteria === 'year') {
                sortedDramas.sort((a, b) => b.year - a.year);
            } else {
                sortedDramas.sort((a, b) => a.popularity - b.popularity);
            }
            renderDramas(sortedDramas);
        }

        // Handle watchlist toggle
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('add-to-watchlist')) {
                const title = e.target.dataset.title;
                if (watchlist.includes(title)) {
                    watchlist = watchlist.filter(t => t !== title);
                    e.target.textContent = 'Add to Watchlist';
                } else {
                    watchlist.push(title);
                    e.target.textContent = 'Remove from Watchlist';
                }
                localStorage.setItem('watchlist', JSON.stringify(watchlist));
                renderWatchlist();
            }
        });

        // Handle sort change
        document.getElementById('sortBy').addEventListener('change', (e) => {
            sortDramas(e.target.value);
        });

        // Handle watchlist reset
        document.getElementById('resetWatchlist').addEventListener('click', () => {
            watchlist = [];
            localStorage.setItem('watchlist', JSON.stringify(watchlist));
            renderWatchlist();
            renderDramas(dramas); // Re-render to update button text
        });

        // Initial render
        renderDramas(dramas);
        renderWatchlist();
    </script>
</body>
</html>